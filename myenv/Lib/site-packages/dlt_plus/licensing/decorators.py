from functools import wraps
from dlt_plus.licensing.lib import validate_license, discover_license
from dlt_plus.const import LICENSE_PUBLIC_KEY


def require_license(func):
    @wraps(func)
    def wrapper_func(*args, **kwargs):
        license = discover_license()
        validate_license(LICENSE_PUBLIC_KEY, license)
        return func(*args, **kwargs)

    return wrapper_func
